<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Extract and manipulate gridded rainfall measurements • rainfallR</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Extract and manipulate gridded rainfall measurements">
<meta property="og:description" content="More about what it does (maybe more than one line)
    Use four spaces when indenting paragraphs within the Description.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">rainfallR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/ExamplePolygonExtraction.html">Example Extraction for one polygon</a>
    </li>
    <li>
      <a href="articles/extract_aggregated_values.html">Extract aggregated Values (time and space) of the rainfall data</a>
    </li>
    <li>
      <a href="articles/extract_rainfall_slope_unit.html"> Extract rainfall data for slopeunit-polygons</a>
    </li>
    <li>
      <a href="articles/points.html">Extract the rainfall for points</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">

<div id="rainfallr" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#rainfallr" class="anchor"></a>rainfallR</h1></div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<ul>
<li>The more recent commits go to gitlab. However the version in Github should be more reliable</li>
</ul>
<div id="-gitlab-" class="section level4">
<h4 class="hasAnchor">
<a href="#-gitlab-" class="anchor"></a><u> gitlab </u>
</h4>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># the paths to the public and private ssh-key</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>public <span class="ot">=</span> <span class="st">"C://PATH/TO/PUBLIC/id_rsa.pub"</span>,</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>private <span class="ot">=</span> <span class="st">"C://PATH/TO/PRIVATE/id_rsa"</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>creds <span class="ot">=</span> git2r<span class="sc">::</span><span class="fu">cread_ssh_key</span>(public, private)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="co"># install it using devtools</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">install_git</span>(<span class="st">"git@gitlab.inf.unibz.it:proslide/rainfallR.git"</span>,</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>                      <span class="at">credentials =</span> creds)</span></code></pre></div>
</div>
<div id="-github-" class="section level4">
<h4 class="hasAnchor">
<a href="#-github-" class="anchor"></a><u> github </u>
</h4>
<p><code><a href="https://remotes.r-lib.org/reference/install_github.html">remotes::install_github("RobinKohrs/rainfallR")</a></code></p>
</div>
</div>
<div id="main-functionalities" class="section level2">
<h2 class="hasAnchor">
<a href="#main-functionalities" class="anchor"></a>Main Functionalities</h2>
<p>In order for this to work, the data needs to be organisd in a specific structure, that is more or less like this:</p>
<ul>
<li>This means that the root-folder here is <code>PREC_GRIDS</code>
<ul>
<li>One level below are folders for all the years
<ul>
<li>and on the bottom-most level there are all the NetCDFs with the data for one month</li>
</ul>
</li>
</ul>
</li>
</ul>
<pre><code>PREC_GRIDS
├── 1980
│   ├── DAILYPCP_198001.nc
│   ├── DAILYPCP_198002.nc
│   ├── DAILYPCP_198003.nc
│   ├── DAILYPCP_198004.nc</code></pre>
<hr>
<div id="get-access-to-single-netcdfs" class="section level3">
<h3 class="hasAnchor">
<a href="#get-access-to-single-netcdfs" class="anchor"></a>Get access to single NetCDFs</h3>
<ul>
<li>One can easily get the path to one raster with the function <code>get_nc_path</code>
</li>
</ul>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">data_path</span> <span class="op">=</span> <span class="st">"absolute_or_relative_path_to/PREC_GRIDs"</span>
<span class="va">days_back</span> <span class="op">=</span> <span class="fl">1</span>
<span class="va">day</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span><span class="op">(</span><span class="st">"2009-01-20"</span><span class="op">)</span>
<span class="co"># will return:</span>
<span class="co"># $`200901`</span>
<span class="co">#[1] "absolute_or_relative_path_to/PREC_GRIDs2009/DAILYPCP_200901.nc"</span></code></pre></div>
<hr>
</div>
<div id="extract-data-of-netcdfs-for-vector-data" class="section level3">
<h3 class="hasAnchor">
<a href="#extract-data-of-netcdfs-for-vector-data" class="anchor"></a>Extract data of NetCDFs for Vector data</h3>
<div id="-point-data-" class="section level4">
<h4 class="hasAnchor">
<a href="#-point-data-" class="anchor"></a><u> Point data </u>
</h4>
<blockquote>
<p>If we are interested in the extraction of rainfall for point data, a tyical workflow could look like this:</p>
</blockquote>
<ol>
<li><strong>get the landslide data</strong></li>
</ol>
<ul>
<li>here the <code>iffitoR</code>-package already comes with some prebuild dataset (<code>landsld</code>)</li>
</ul>
<ol>
<li><strong>Create a list of slides that happened on the same day in South Tyrol</strong></li>
</ol>
<ul>
<li><p>You can filter the <code>landsld</code> data according to your needs first</p></li>
<li><p>And then run the function <code>iffi10_same_day</code> which returns a list. Each elemet in this list is a spatial dataframe with one or more slides that happened on the same day</p></li>
</ul>
<ol>
<li><strong>Extract the rainfall for those slides</strong></li>
</ol>
<ul>
<li>Now you can iterate over each element in the list and exract the rainfall for that date for those points. In <a href="https://robinkohrs.github.io/rainfallR/articles/extract_rainfall_landslidePoints.html">this vignette</a> one can find an approach to do this in parallel</li>
</ul>
</div>
<div id="-polygon-data-" class="section level4">
<h4 class="hasAnchor">
<a href="#-polygon-data-" class="anchor"></a><u> Polygon data </u>
</h4>
<blockquote>
<p>For Polygon data we probably want to perform some kinf of aggregation. So the workflow might look a little different</p>
</blockquote>
<ol>
<li><strong>get the polygon data</strong></li>
</ol>
<ul>
<li>Something like the slope units, landslide polyons or catchments</li>
</ul>
<ol>
<li><strong>Find all the polygons that experienced landslides</strong></li>
</ol>
<ul>
<li>The function <code>slide_dates_in_polygon</code> returns one large <code>dataframe</code> where each row is one polygon that experienced at least one movement at a particular day. The column <code>slides_per_poly_data</code> contains the number of movements per day in that polygon.</li>
</ul>
<ol>
<li><strong>Extract the rainfall for each of the polygons</strong></li>
</ol>
<ul>
<li>The function <code>get_rainfall_for_polygons</code> now extracts in parallel the rainfall for the each polygon.</li>
</ul>
</div>
<div id="more-help" class="section level4">
<h4 class="hasAnchor">
<a href="#more-help" class="anchor"></a>More help</h4>
<ul>
<li>See <a href="https://robinkohrs.github.io/rainfallR/articles/extract_landslide_rainfall.html">this vignette for more info</a>
</li>
</ul>
<hr>
<p><img src="reference/figures/readmeplot.png"></p>
</div>
</div>
</div>
</div>
<div id="working-with-temperature-data" class="section level1">
<h1 class="hasAnchor">
<a href="#working-with-temperature-data" class="anchor"></a>Working with temperature data</h1>
<ul>
<li><p>As we have access to data about the temperature from 2000 to 2020 in almost the same format it was worth adapting the function slightly to also extract this data for points and polygons.</p></li>
<li><p>The funciton <code>ex_rainfall</code> now also can work with temperature data. Therefore you only need to change the paramter passed to the <code>nc_var</code>-argument. Instead of using the default: <code>precipitation</code>, use <code>temperature</code>.</p></li>
<li><p>The rest should stay the same. An Example function call could then look like this:</p></li>
</ul>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">data_path</span> <span class="op">=</span> <span class="st">"path_to_temperature_data"</span>
<span class="va">spatial.obj</span> <span class="op">=</span> <span class="st">"path_to_polygons"</span> <span class="co"># lets assume this is a polygon (e.g. a slope-unit)</span>
<span class="va">fun</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"mean"</span>, <span class="st">"max"</span><span class="op">)</span>
<span class="va">date</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span><span class="op">(</span><span class="st">"2020-01-01"</span><span class="op">)</span>
<span class="va">nc_var</span> <span class="op">=</span> <span class="st">"precipitation"</span>
<span class="va">days_back</span> <span class="op">=</span> <span class="fl">7</span>

<span class="va">res</span> <span class="op">=</span> <span class="fu"><a href="reference/ex_rainfall.html">ex_rainfall</a></span><span class="op">(</span>data_oath<span class="op">=</span><span class="va">data_path</span>, spatial.obj<span class="op">=</span><span class="va">spatial.obj</span>, fun<span class="op">=</span><span class="va">fun</span>, data<span class="op">=</span><span class="va">date</span>, nc_var<span class="op">=</span><span class="va">nc_var</span>, days_back<span class="op">=</span><span class="va">days_back</span><span class="op">)</span></code></pre></div>
</div>

  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>What license is it under?</li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li> <br><small class="roles"> Maintainer </small>  </li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p>Developed by .</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
