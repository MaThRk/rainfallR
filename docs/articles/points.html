<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Extract the rainfall for points • rainfallR</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Extract the rainfall for points">
<meta property="og:description" content="rainfallR">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rainfallR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/ExamplePolygonExtraction.html">Example Extraction for one polygon</a>
    </li>
    <li>
      <a href="../articles/ant_rainfall.html">Get antecedent rainfall</a>
    </li>
    <li>
      <a href="../articles/diff_data.html">Use data that is not IFFI data</a>
    </li>
    <li>
      <a href="../articles/extract_aggregated_values.html">Extract aggregated Values (time and space) of the rainfall data</a>
    </li>
    <li>
      <a href="../articles/extract_rainfall_slope_unit.html"> Extract rainfall data for slopeunit-polygons</a>
    </li>
    <li>
      <a href="../articles/points.html">Extract the rainfall for points</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="points_files/header-attrs-2.6/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Extract the rainfall for points</h1>
            
      
      
      <div class="hidden name"><code>points.Rmd</code></div>

    </div>

    
    
<div id="how-to-extract-the-rainfall-data-for-points" class="section level1">
<h1 class="hasAnchor">
<a href="#how-to-extract-the-rainfall-data-for-points" class="anchor"></a>How to extract the rainfall data for points</h1>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">rainfallR</span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">iffitoR</span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggforce.data-imaginist.com">ggforce</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://wilkelab.org/ggtext/">ggtext</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">rainfallR</span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/tidyverse/glue">glue</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://here.r-lib.org/">here</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://scales.r-lib.org">scales</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://lubridate.tidyverse.org">lubridate</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/">sf</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/stars/">stars</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://rspatial.org/raster">raster</a></span><span class="op">)</span></code></pre></div>
<div id="requiremets" class="section level2">
<h2 class="hasAnchor">
<a href="#requiremets" class="anchor"></a>Requiremets</h2>
<ol style="list-style-type: decimal">
<li><p>We need access to the rainfall data</p></li>
<li><p>We need a “spatial object” (points in that case), that hase some temporal <strong>daily</strong> temporal information. This is important as it only makes sense to extract the daily rainfall data if one has information about the date one wants to extract the data. It would be possible to think about to handle the extraction if the input is a month. However, this is not implemented here.</p></li>
</ol>
<p>We use the landslide-data from the <code>iffitoR</code>-package.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">iffitoR</span><span class="op">)</span> <span class="co"># comes with the data-object called landsld</span>

<span class="co"># select only the daily data after 1980</span>
<span class="co"># the filtering for the "day" would not even be necessary as the function 'iffi10_same_day' does the same</span>
<span class="va">landsld</span> <span class="op">=</span> <span class="va">landsld</span><span class="op">[</span><span class="va">landsld</span><span class="op">$</span><span class="va">date_info</span> <span class="op">==</span> <span class="st">"day"</span> <span class="op">&amp;</span> <span class="va">landsld</span><span class="op">$</span><span class="va">date</span> <span class="op">&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span><span class="op">(</span><span class="st">"1980-01-01"</span><span class="op">)</span>, <span class="op">]</span>

<span class="co"># select the first 100</span>
<span class="va">landsld</span> <span class="op">=</span> <span class="va">landsld</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">100</span>, <span class="op">]</span></code></pre></div>
</div>
<div id="get-all-the-slides-that-happened-on-the-same-day" class="section level2">
<h2 class="hasAnchor">
<a href="#get-all-the-slides-that-happened-on-the-same-day" class="anchor"></a>1. Get all the slides that happened on the same day</h2>
<ul>
<li>This function does not only work with objects of the iffi database</li>
</ul>
<p>-It however requires, that there is a column called <code>date</code></p>
<ul>
<li>This returns a list with where each element is an object of class <code>sf</code> with spatial objects that happened on the same day</li>
</ul>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">slides_same_day</span> <span class="op">=</span> <span class="fu"><a href="../reference/iffi10_same_day.html">iffi10_same_day</a></span><span class="op">(</span><span class="va">landsld</span><span class="op">)</span></code></pre></div>
<ul>
<li><p>We could now ask for example for the maximim number of slides on one day in all our area of interest.</p></li>
<li><p>The number of slides per day is equal to the number of rows per dataframe.</p></li>
</ul>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">n_slides_per_day</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html">sapply</a></span><span class="op">(</span><span class="va">slides_same_day</span>, <span class="va">nrow</span><span class="op">)</span>
<span class="va">n</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">n_slides_per_day</span><span class="op">)</span>
<span class="va">idx</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/which.minmax.html">which.max</a></span><span class="op">(</span><span class="va">n_slides_per_day</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/sprintf.html">sprintf</a></span><span class="op">(</span><span class="st">"The maximum number of slides per day in our data is %d"</span>, <span class="va">n</span><span class="op">)</span>
<span class="co">#&gt; [1] "The maximum number of slides per day in our data is 6"</span>
<span class="fu"><a href="https://rdrr.io/r/base/sprintf.html">sprintf</a></span><span class="op">(</span><span class="st">"They happened on the: %s"</span>, <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/names.html">names</a></span><span class="op">(</span><span class="va">n_slides_per_day</span><span class="op">)</span><span class="op">[[</span><span class="va">idx</span><span class="op">]</span><span class="op">]</span>, format <span class="op">=</span> <span class="st">"%Y%m%d"</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; [1] "They happened on the: 1998-02-17"</span></code></pre></div>
</div>
<div id="extract-the-rainfall-data" class="section level2">
<h2 class="hasAnchor">
<a href="#extract-the-rainfall-data" class="anchor"></a>Extract the rainfall data</h2>
<ul>
<li><p>Now we can extract the rainfall data for each date.</p></li>
<li><p>The <code>rainfallR</code>-package extracts the data for objects of class <code>sf</code>. So spatical rectangular dataframes.</p></li>
<li><p>It was designed so that it can extract the rainfall data, for a dataframe that consists of multiple slide-locations (usually in the column <code>geom</code>), but only for one date.</p></li>
<li><p>(Here I’m talking about an <code>sf</code>-object of clas <code>POINT</code> and not about class <code>MULTIPOINT</code>)</p></li>
<li><p>This was done because it made it easier to read the large daily NetCDfs only once and extract directly all the data for the multiple slides</p></li>
<li><p>That is why we ran the function <code>iffi10_same_day</code>. In order to get all the unique days where slides happened and bring down the computation time.</p></li>
</ul>
<p><strong>THIS WORKS</strong> (same date, different location)</p>
<table class="table">
<thead><tr class="header">
<th>slide_id</th>
<th>date</th>
<th>geom</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>“2020-01-01”</td>
<td>POINT (30 10)</td>
</tr>
<tr class="even">
<td>2</td>
<td>“2020-01-01”</td>
<td>POINT (40 10)</td>
</tr>
</tbody>
</table>
<p><strong>THIS DOES NOT WORK</strong> (same location, different date)</p>
<table class="table">
<thead><tr class="header">
<th>slide_id</th>
<th>date</th>
<th>geom</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>“2020-01-01”</td>
<td>POINT (30 10)</td>
</tr>
<tr class="even">
<td>2</td>
<td>“2020-02-01”</td>
<td>POINT (30 10)</td>
</tr>
</tbody>
</table>
<ul>
<li><p>We thus will iterate over the elements in the list <code>slides_same_day</code> and apply to each element the function <code>ex_rainfall</code></p></li>
<li><p>This function returns a dataframe with <code><a href="https://rdrr.io/pkg/raster/man/ncell.html">nrow(element_of_list)</a></code> * <code>days_back</code> rows.</p></li>
<li><p>We will row-bind these dataframes and so construct one big dataframe</p></li>
</ul>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">doParallel</span><span class="op">)</span>
<span class="co">#&gt; Loading required package: foreach</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Attaching package: 'foreach'</span>
<span class="co">#&gt; The following objects are masked from 'package:purrr':</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     accumulate, when</span>
<span class="co">#&gt; Loading required package: iterators</span>
<span class="co">#&gt; Loading required package: parallel</span>
<span class="fu"><a href="https://rdrr.io/pkg/doParallel/man/registerDoParallel.html">registerDoParallel</a></span><span class="op">(</span><span class="fl">8</span><span class="op">)</span>

<span class="va">start</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html">Sys.time</a></span><span class="op">(</span><span class="op">)</span>
<span class="va">res</span> <span class="op">=</span> <span class="fu">foreach</span><span class="op">(</span>
  i <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">slides_same_day</span><span class="op">)</span>,
  .combine <span class="op">=</span> <span class="va">rbind</span>,
  .packages <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"rainfallR"</span>,
                <span class="st">"magrittr"</span>,
                <span class="st">"stringr"</span>,
                <span class="st">"dplyr"</span><span class="op">)</span>
<span class="op">)</span> <span class="op">%dopar%</span> <span class="op">{</span>

  <span class="co"># get the date of the slides</span>
  <span class="va">date</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/raster/man/names.html">names</a></span><span class="op">(</span><span class="va">slides_same_day</span><span class="op">)</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span><span class="op">(</span><span class="va">.</span>, <span class="st">"%Y%m%d"</span><span class="op">)</span>

  <span class="co"># the spatial object</span>
  <span class="va">spatial.obj</span> <span class="op">=</span> <span class="va">slides_same_day</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span>

  <span class="co"># go thirty days_back. Pray this works</span>
  <span class="va">days_back</span> <span class="op">=</span> <span class="fl">7</span>

  <span class="co"># this returns a dataframe</span>
  <span class="va">rf</span> <span class="op">=</span> <span class="fu">rainfallR</span><span class="fu">::</span><span class="fu"><a href="../reference/ex_rainfall.html">ex_rainfall</a></span><span class="op">(</span>
    data_path <span class="op">=</span> <span class="va">data_path</span>,
    spatial.obj <span class="op">=</span> <span class="va">spatial.obj</span>,
    fun <span class="op">=</span> <span class="cn">NULL</span>, <span class="co"># we are using points</span>
    nc_var <span class="op">=</span> <span class="st">"precipitation"</span>,
    date <span class="op">=</span> <span class="va">date</span>,
    days_back <span class="op">=</span> <span class="va">days_back</span>
  <span class="op">)</span>
<span class="op">}</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Attaching package: 'magrittr'</span>
<span class="co">#&gt; The following object is masked from 'package:raster':</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     extract</span>
<span class="co">#&gt; The following object is masked from 'package:purrr':</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     set_names</span>
<span class="co">#&gt; The following object is masked from 'package:tidyr':</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     extract</span>

<span class="va">end</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html">Sys.time</a></span><span class="op">(</span><span class="op">)</span>
<span class="va">took</span> <span class="op">=</span> <span class="va">end</span><span class="op">-</span><span class="va">start</span>

<span class="fu"><a href="https://rdrr.io/pkg/raster/man/dimensions.html">dim</a></span><span class="op">(</span><span class="va">res</span><span class="op">)</span>
<span class="co">#&gt; [1] 800  35</span></code></pre></div>
<div id="inspect-the-results" class="section level3">
<h3 class="hasAnchor">
<a href="#inspect-the-results" class="anchor"></a>Inspect the results</h3>
<div id="all-slides" class="section level4">
<h4 class="hasAnchor">
<a href="#all-slides" class="anchor"></a>All slides</h4>
<ul>
<li>We can visualize the rainfall for all of the slides of the day of the slide and the 7 days before</li>
</ul>
<p><img src="points_files/figure-html/unnamed-chunk-7-1.png" width="768"></p>
</div>
<div id="one-slide" class="section level4">
<h4 class="hasAnchor">
<a href="#one-slide" class="anchor"></a>One slide</h4>
<ul>
<li>In order to understand the next step, we can also look at one single slide</li>
</ul>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># get the first slide</span>
<span class="va">slide</span> <span class="op">=</span> <span class="va">res</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">PIFF_ID</span> <span class="op">==</span> <span class="fu">first</span><span class="op">(</span><span class="va">PIFF_ID</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p><img src="points_files/figure-html/unnamed-chunk-9-1.png" width="768"></p>
</div>
</div>
</div>
<div id="reconstruct-the-rainfall-events" class="section level2">
<h2 class="hasAnchor">
<a href="#reconstruct-the-rainfall-events" class="anchor"></a>Reconstruct the rainfall events</h2>
<ul>
<li><p>In order to get the rainfall events per slide (in our time of consideration, here 7 days) we will “reconstruct” the rainfall events</p></li>
<li><p>As we are working with continous gridded data, we do not need to worry about selecting a rain-gauge based on some criteria as the data is directy “below” the point</p></li>
<li><p>The dataframe <code>res</code> now has 800 rows and still 100 unique slides. We can confirm this by 100`</p></li>
<li><p>We want to reconstruct the rainfall for each of the unique slides</p></li>
</ul>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># we therefore create a list again for each slide</span>
<span class="va">unique_slides_with_cumulated_rainfall</span> <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/stars/reference/merge.html">split</a></span><span class="op">(</span><span class="va">res</span>, <span class="va">res</span><span class="op">$</span><span class="va">PIFF_ID</span><span class="op">)</span></code></pre></div>
<ul>
<li><p>and then we can apply the funtion <code>reconstruct_daily_rainfall_events</code> on each element</p></li>
<li><p>This function takes as input a dataframe with a column called <code>precip</code> and return also a dataframe with an additional column called <code>event</code>. This column shows the number of the event</p></li>
<li><p>One can control the number of days (“The dry period”) which can interleave rainy days (controlled by the argument <code>daily_thresh</code>). Here we set it to 0, meaning that there can’t be any day without less than 0.2 mm rainfall which is part of a “rainfall event”</p></li>
<li><p>after the application of the funciton we will stack all the dataframes on top of each other</p></li>
</ul>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">slides_with_rainfall_event</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span><span class="op">(</span><span class="va">unique_slides_with_cumulated_rainfall</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">{</span>
  <span class="fu">rainfallR</span><span class="fu">::</span><span class="fu"><a href="../reference/reconstruct_daily_rainfall_events.html">reconstruct_daily_rainfall_events</a></span><span class="op">(</span><span class="va">x</span>, n <span class="op">=</span> <span class="fl">0</span>, daily_thresh <span class="op">=</span> <span class="fl">.2</span><span class="op">)</span> 
<span class="op">}</span><span class="op">)</span>

<span class="co"># stack them</span>
<span class="va">final_df</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/do.call.html">do.call</a></span><span class="op">(</span><span class="st">"rbind"</span>, <span class="va">slides_with_rainfall_event</span><span class="op">)</span></code></pre></div>
<ul>
<li>Now we can for example plot the duration of the last rainfall event for each slide</li>
</ul>
<pre><code>#&gt; `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="points_files/figure-html/unnamed-chunk-12-1.png" width="576"></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by .</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
