) +
guides(colour = guide_legend(override.aes = list(alpha=1)),
size = guide_legend(override.aes = list(alpha=1))) +
scale_size_manual(name="Outlier", values=c(0.5, 1.5)) +
scale_x_reverse()
res %>%
group_by(PIFF_ID) %>%
mutate(
diff = last(cumsum) - first(cumsum)
) %>%
ungroup() %>%
mutate(
sd = 2 * sd(diff),
outlier = ifelse(diff > sd, TRUE, FALSE)
) %>%
ggplot() +
geom_path(
mapping = aes(x=days_before_event, y = cumsum, group=PIFF_ID, col=outlier,  size=outlier),
alpha=.5
) +
guides(colour = guide_legend(override.aes = list(alpha=1)),
size = guide_legend(override.aes = list(alpha=1))) +
scale_size_manual(name="Outlier", values=c(0.2, 1.5)) +
scale_x_reverse()
res %>%
group_by(PIFF_ID) %>%
mutate(
diff = last(cumsum) - first(cumsum)
) %>%
ungroup() %>%
mutate(
sd = 2 * sd(diff),
outlier = ifelse(diff > sd, TRUE, FALSE)
) %>%
ggplot() +
geom_path(
mapping = aes(x=days_before_event, y = cumsum, group=PIFF_ID, col=outlier,  size=outlier),
alpha=.2
) +
guides(colour = guide_legend(override.aes = list(alpha=1)),
size = guide_legend(override.aes = list(alpha=1))) +
scale_size_manual(name="Outlier", values=c(0.2, 1.5)) +
scale_x_reverse()
# create an upcounting couter
anim_slides = out_unique_slide %>%
group_by(id) %>%
filter(!is.na(area)) %>%
mutate(time_anim = row_number()) %>%
mutate(area = log10(area)) %>%
ggplot(., aes(x=days_before_event, y=cumsum, group=id, col=second_level), lwd=2) +
geom_line() +
geom_point(aes(size=area)) +
scale_x_reverse() +
geom_segment(aes(xend=0, yend=cumsum), linetype=2, colour="grey") +
geom_text(aes(x = -0.3, label=PIFF_ID)) +
theme_light() +
labs(title="Cumulative Rainfall before Landslides",
subtitle = "at point location",
x = "Days before Slide",
y = "Cumulative Rainfall per day [mm]",
size = "log 10 area ") +
transition_reveal(time_anim)
res %>%
group_by(PIFF_ID) %>%
mutate(
diff = last(cumsum) - first(cumsum)
) %>%
ungroup() %>%
mutate(
sd = 2 * sd(diff),
outlier = ifelse(diff > sd, TRUE, FALSE)
) %>%
ggplot() +
geom_path(
mapping = aes(x=days_before_event, y = cumsum, group=PIFF_ID, col=outlier,  size=outlier),
alpha=.2
) +
guides(colour = guide_legend(override.aes = list(alpha=1)),
size = guide_legend(override.aes = list(alpha=1))) +
scale_size_manual(name="Outlier", values=c(0.2, 1.5)) +
scale_x_reverse()
res %>%
group_by(PIFF_ID) %>%
mutate(
diff = last(cumsum) - first(cumsum)
) %>%
ungroup() %>%
mutate(
sd = 2 * sd(diff),
outlier = ifelse(diff > sd, TRUE, FALSE)
) %>%
ggplot() +
geom_path(
mapping = aes(x=days_before_event, y = cumsum, group=PIFF_ID, col=outlier,  size=outlier),
alpha=.2
) +
scale_colour_manual(name="Outlier (diff > 2*sd)", values = c("black", "red")) +
guides(colour = guide_legend(override.aes = list(alpha=1)),
size = guide_legend(override.aes = list(alpha=1))) +
scale_size_manual(name="Outlier", values=c(0.2, 1.5)) +
scale_x_reverse()
res %>%
group_by(PIFF_ID) %>%
mutate(
diff = last(cumsum) - first(cumsum)
) %>%
ungroup() %>%
mutate(
sd = 2 * sd(diff),
outlier = ifelse(diff > sd, TRUE, FALSE)
) %>%
ggplot() +
geom_path(
mapping = aes(x=days_before_event, y = cumsum, group=PIFF_ID, col=outlier,  size=outlier),
alpha=.2
) +
scale_colour_manual(name="Outlier (diff > 2*sd)", values = c("black", "red")) +
guides(colour = guide_legend(override.aes = list(alpha=1)),
size = guide_legend(override.aes = list(alpha=1))) +
scale_size_manual(name="Outlier", values=c(0.2, 1.5)) +
scale_x_reverse()
res %>%
group_by(PIFF_ID) %>%
mutate(
diff = last(cumsum) - first(cumsum)
) %>%
ungroup() %>%
mutate(
sd = 2 * sd(diff),
outlier = ifelse(diff > sd, TRUE, FALSE)
) %>%
ggplot() +
geom_path(
mapping = aes(x=days_before_event, y = cumsum, group=PIFF_ID, col=second_level,  size=diff),
alpha=.2
) +
scale_colour_manual(name="Outlier (diff > 2*sd)", values = c("black", "red")) +
guides(colour = guide_legend(override.aes = list(alpha=1)),
size = guide_legend(override.aes = list(alpha=1))) +
scale_size_manual(name="Outlier", values=c(0.2, 1.5)) +
scale_x_reverse()
res %>%
group_by(PIFF_ID) %>%
mutate(
diff = last(cumsum) - first(cumsum)
) %>%
ungroup() %>%
mutate(
sd = 2 * sd(diff),
outlier = ifelse(diff > sd, TRUE, FALSE)
) %>%
ggplot() +
geom_path(
mapping = aes(x=days_before_event, y = cumsum, group=PIFF_ID, col=second_level,  size=diff),
alpha=.2
) +
scale_colour_manual(name="Outlier (diff > 2*sd)", values = c("black", "red")) +
guides(colour = guide_legend(override.aes = list(alpha=1)),
size = guide_legend(override.aes = list(alpha=1))) +
scale_size_continuous(name="Diff Last -> First", low="white", high="black") +
scale_x_reverse()
res %>%
group_by(PIFF_ID) %>%
mutate(
diff = last(cumsum) - first(cumsum)
) %>%
ungroup() %>%
mutate(
sd = 2 * sd(diff),
outlier = ifelse(diff > sd, TRUE, FALSE)
) %>%
ggplot() +
geom_path(
mapping = aes(x=days_before_event, y = cumsum, group=PIFF_ID, col=second_level,  size=diff),
alpha=.2
) +
scale_colour_manual(name="Outlier (diff > 2*sd)", values = c("black", "red")) +
guides(colour = guide_legend(override.aes = list(alpha=1)),
size = guide_legend(override.aes = list(alpha=1))) +
scale_size(name="Diff Last -> First", values = c(0.3, 2)) +
scale_x_reverse()
res %>%
group_by(PIFF_ID) %>%
mutate(
diff = last(cumsum) - first(cumsum)
) %>%
ungroup() %>%
mutate(
sd = 2 * sd(diff),
outlier = ifelse(diff > sd, TRUE, FALSE)
) %>%
ggplot() +
geom_path(
mapping = aes(x=days_before_event, y = cumsum, group=PIFF_ID, col=second_level,  size=diff),
alpha=.2
) +
scale_colour_manual(name="Outlier (diff > 2*sd)", values = c("black", "red")) +
guides(colour = guide_legend(override.aes = list(alpha=1)),
size = guide_legend(override.aes = list(alpha=1))) +
scale_size_manual(name="Diff Last -> First", values = c(0.3, 2)) +
scale_x_reverse()
res %>%
group_by(PIFF_ID) %>%
mutate(
diff = last(cumsum) - first(cumsum)
) %>%
ungroup() %>%
mutate(
sd = 2 * sd(diff),
outlier = ifelse(diff > sd, TRUE, FALSE)
) %>%
ggplot() +
geom_path(
mapping = aes(x=days_before_event, y = cumsum, group=PIFF_ID, col=second_level,
alpha = diff, size=outlier),
alpha=.2
) +
scale_colour_manual(name="Type of movement", values = c("black", "red"))  +
scale_x_reverse()
res %>%
group_by(PIFF_ID) %>%
mutate(
diff = last(cumsum) - first(cumsum)
) %>%
ungroup() %>%
mutate(
sd = 2 * sd(diff),
outlier = ifelse(diff > sd, TRUE, FALSE)
) %>%
ggplot() +
geom_path(
mapping = aes(x=days_before_event, y = cumsum, group=PIFF_ID, col=second_level,
alpha = diff, size=outlier),
alpha=.2
) +
scale_colour_manual(name="Type of movement", values = c("black", "red"))  +
scale_size_manual(name = "diff > 2 * sd", values = c(0.3, 2)) +
scale_x_reverse()
res %>%
group_by(PIFF_ID) %>%
mutate(
diff = last(cumsum) - first(cumsum)
) %>%
ungroup() %>%
mutate(
sd = 2 * sd(diff),
outlier = ifelse(diff > sd, TRUE, FALSE)
) %>%
ggplot() +
geom_path(
mapping = aes(x=days_before_event, y = cumsum, group=PIFF_ID, col=second_level,
alpha = diff, size=outlier),
alpha=.2
) +
scale_colour_manual(name="Type of movement", values = c("black", "red"))  +
scale_size_manual(name = "diff > 2 * sd", values = c(0.1, 2)) +
scale_x_reverse()
res %>%
group_by(PIFF_ID) %>%
mutate(
diff = last(cumsum) - first(cumsum)
) %>%
ungroup() %>%
mutate(
sd = 2 * sd(diff),
outlier = ifelse(diff > sd, TRUE, FALSE)
) %>%
ggplot() +
geom_path(
mapping = aes(x=days_before_event, y = cumsum, group=PIFF_ID, col = diff),
alpha=.2
) +
scale_colour_continuous(name="Difference", low = "white", high="red")  +
scale_x_reverse()
res %>%
group_by(PIFF_ID) %>%
mutate(
diff = last(cumsum) - first(cumsum)
) %>%
ungroup() %>%
mutate(
sd = 2 * sd(diff),
outlier = ifelse(diff > sd, TRUE, FALSE)
) %>%
ggplot() +
geom_path(
mapping = aes(x=days_before_event, y = cumsum, group=PIFF_ID, col = diff,
alpha = diff)
) +
scale_colour_continuous(name="Difference", low = "white", high="red")  +
scale_x_reverse()
res %>%
group_by(PIFF_ID) %>%
mutate(
diff = last(cumsum) - first(cumsum)
) %>%
ungroup() %>%
mutate(
sd = 2 * sd(diff),
outlier = ifelse(diff > sd, TRUE, FALSE)
) %>%
ggplot() +
geom_path(
mapping = aes(x=days_before_event, y = cumsum, group=PIFF_ID, col = diff,
alpha = diff)
) +
scale_colour_continuous(name="Difference", low = "white", high="red")  +
guides(alpha = FALSE) +
scale_x_reverse()
res %>%
group_by(PIFF_ID) %>%
mutate(
diff = last(cumsum) - first(cumsum)
) %>%
ungroup() %>%
mutate(
sd = 2 * sd(diff),
outlier = ifelse(diff > sd, TRUE, FALSE)
) %>%
ggplot() +
geom_path(
mapping = aes(x=days_before_event, y = cumsum, group=PIFF_ID, col = diff,
alpha = diff)
) +
scale_colour_continuous(name="Absolute Difference in precipitation between last and firs day", low = "white", high="red")  +
guides(alpha = FALSE) +
scale_x_reverse()
name="Absolute Difference in precipitation between last and firs day",
res %>%
group_by(PIFF_ID) %>%
mutate(
diff = last(cumsum) - first(cumsum)
) %>%
ungroup() %>%
mutate(
sd = 2 * sd(diff),
outlier = ifelse(diff > sd, TRUE, FALSE)
) %>%
ggplot() +
geom_path(
mapping = aes(x=days_before_event, y = cumsum, group=PIFF_ID, col = diff,
alpha = diff)
) +
scale_colour_continuous(
name="Absolute Difference in precipitation between last and firs day",
low = "white",
high="red")  +
guides(alpha = FALSE) +
scale_x_reverse() +
theme(
legend.position = "bottom"
)
name="Absolute Difference in precipitation between last and firs day",
res %>%
group_by(PIFF_ID) %>%
mutate(
diff = last(cumsum) - first(cumsum)
) %>%
ungroup() %>%
mutate(
sd = 2 * sd(diff),
outlier = ifelse(diff > sd, TRUE, FALSE)
) %>%
ggplot() +
geom_path(
mapping = aes(x=days_before_event, y = cumsum, group=PIFF_ID, col = diff,
alpha = diff)
) +
scale_colour_continuous(
name="Absolute Difference in precipitation between last and firs day",
low = "white",
high="red")  +
guides(alpha = FALSE) +
scale_x_reverse() +
theme(
legend.position = "bottom"
) +
theme_minimal() +
labs(
x = "Days before Event",
y = "cumulative rainfall [mm]",
title = "Precipitation before an graviational mass movement",
subtitle = "(translational and rotational movement)"
)
res %>%
group_by(PIFF_ID) %>%
mutate(
diff = last(cumsum) - first(cumsum)
) %>%
ungroup() %>%
mutate(
sd = 2 * sd(diff),
outlier = ifelse(diff > sd, TRUE, FALSE)
) %>%
ggplot() +
geom_path(
mapping = aes(x=days_before_event, y = cumsum, group=PIFF_ID, col = diff,
alpha = diff)
) +
scale_colour_continuous(
name="Absolute Difference in precipitation between last and firs day",
low = "white",
high="red")  +
guides(alpha = FALSE) +
scale_x_reverse() +
theme_minimal() +
labs(
x = "Days before Event",
y = "cumulative rainfall [mm]",
title = "Precipitation before an graviational mass movement",
subtitle = "(translational and rotational movement)"
) +
theme(
legend.position = "bottom"
)
name="Absolute Difference in precipitation between last and firs day",
res %>%
group_by(PIFF_ID) %>%
mutate(
diff = last(cumsum) - first(cumsum)
) %>%
ungroup() %>%
mutate(
sd = 2 * sd(diff),
outlier = ifelse(diff > sd, TRUE, FALSE)
) %>%
ggplot() +
geom_path(
mapping = aes(x=days_before_event, y = cumsum, group=PIFF_ID, col = diff,
alpha = diff)
) +
scale_colour_continuous(
name="Absolute Difference in precipitation between last and firs day",
low = "white",
high="red")  +
guides(alpha = FALSE) +
scale_x_reverse() +
theme_minimal() +
labs(
x = "Days before Event",
y = "cumulative precipitation [mm]",
title = "Precipitation [mm] before an graviational mass movement",
subtitle = "(translational and rotational movements)"
) +
theme(
legend.position = "bottom"
)
ggsave("../../../presentations/internship_resume/plots/plots/precipitation_all_trans_and_rotational_movements.png")
ggsave("../../../presentations/internship_resume/plots/plots/precipitation_all_trans_and_rotational_movements.png", width = 12, height = 8)
res %>%
group_by(PIFF_ID) %>%
mutate(
diff = last(cumsum) - first(cumsum)
) %>%
ungroup() %>%
mutate(
sd = 2 * sd(diff),
outlier = ifelse(diff > sd, TRUE, FALSE)
) %>%
ggplot() +
geom_path(
mapping = aes(x=days_before_event, y = cumsum, group=PIFF_ID, col = diff,
alpha = diff)
) +
scale_colour_continuous(
name="Absolute Difference in precipitation between last and firs day",
low = "red",
high="white")  +
guides(alpha = FALSE) +
scale_x_reverse() +
theme_minimal() +
labs(
x = "Days before Event",
y = "cumulative precipitation [mm]",
title = "Precipitation [mm] before an graviational mass movement",
subtitle = "(translational and rotational movements)"
) +
theme(
legend.position = "bottom"
)
res %>%
group_by(PIFF_ID) %>%
mutate(
diff = last(cumsum) - first(cumsum)
) %>%
ungroup() %>%
mutate(
sd = 2 * sd(diff),
outlier = ifelse(diff > sd, TRUE, FALSE)
) %>%
ggplot() +
geom_path(
mapping = aes(x=days_before_event, y = cumsum, group=PIFF_ID, col = diff,
alpha = diff)
) +
scale_colour_continuous(
name="Absolute Difference in precipitation between last and first day",
low = "white",
high="red")  +
guides(alpha = FALSE) +
scale_x_reverse() +
theme_minimal() +
labs(
x = "Days before Event",
y = "cumulative precipitation [mm]",
title = "Precipitation [mm] before an graviational mass movement",
subtitle = "(translational and rotational movements)"
) +
theme(
legend.position = "bottom"
)
ggsave("../../../presentations/internship_resume/plots/plots/precipitation_all_trans_and_rotational_movements.png", width = 12, height = 8)
